# 企业级 DevOps 运维平台帮助文档

## 1. 文档说明

本手册面向以下角色：
- 运维工程师
- SRE
- 平台管理员

目标：帮助你在日常值班、故障处理、发布变更和权限治理中快速定位操作路径与标准流程。

## 2. 快速开始

1. 登录后先确认当前项目（顶部项目切换）。
2. 查看顶部系统健康度与监控首页关键告警。
3. 优先处理 `critical` 级别异常。
4. 遇到复杂问题，打开右侧 AI 助手执行只读诊断。

## 3. 功能导航

- `监控`：系统健康、告警、核心指标
- `主机`：主机纳管、在线状态、终端与诊断
- `服务`：服务列表、配置、发布、回滚
- `部署`：部署任务与交付流程
- `任务`：定时/批处理任务及执行历史
- `配置中心`：配置项管理、Diff、发布与回滚
- `K8s`：集群与资源视图
- `权限管理`：用户、角色、权限策略
- `AI 命令中心 / AI 助手`：诊断建议、工具调用、审批执行

## 4. 常见操作指南

### 4.1 新增主机纳管

1. 进入主机管理页面，发起主机纳管。
2. 填写 IP、端口、认证信息（密码或密钥）。
3. 先执行连通性探测，通过后再提交。
4. 在主机列表确认状态为在线。

失败排查建议：
- 检查网络连通与端口放行
- 检查 SSH 凭据是否正确
- 检查账号执行权限

### 4.2 告警处理

1. 按严重级别筛选 `critical`。
2. 查看告警触发时间窗、对象、指标值。
3. 结合 AI 助手做只读诊断（CPU/内存/磁盘/日志）。
4. 记录处置动作，确认恢复后关闭告警。

### 4.3 服务发布

1. 选择目标服务并执行发布预览。
2. 核对镜像版本、配置差异与影响范围。
3. 生产操作需二次确认。
4. 发布后关注错误率与延迟，异常时回滚。

### 4.4 配置发布与回滚

1. 编辑配置并保存草稿。
2. 使用 Diff 对比确认变更。
3. 发布到目标环境。
4. 异常时选择历史版本回滚。

### 4.5 定时任务管理

1. 创建任务，配置目标与执行命令。
2. 设置调度规则（Cron）。
3. 先在测试环境验证。
4. 在执行历史中检查耗时、输出与失败原因。

### 4.6 权限管理（RBAC）

1. 先定义角色，再绑定用户。
2. 遵循最小权限原则：默认只读，按需授权。
3. 生产写操作建议启用审批链路。
4. 定期审计高权限账号。

## 5. AI 助手使用规范

### 5.1 推荐提问模板

- 诊断类：`帮我排查 <对象> 的 <现象>，先给只读检查步骤`
- 变更类：`请先给预览，再说明风险和回滚方案`
- 汇总类：`基于当前告警给我一个 10 分钟内可执行计划`

### 5.2 执行安全机制

- 只读工具可直接执行
- 变更类工具必须审批
- 参数缺失时 AI 会先补充询问
- 所有操作可审计追踪

## 6. 值班应急 Playbook（15 分钟）

- 0-5 分钟：确认影响范围，暂停高风险变更
- 5-10 分钟：采集指标、日志、事件，定位故障域
- 10-15 分钟：执行回滚/降级/限流，先恢复核心路径

## 7. FAQ

### Q1：为什么 AI 没有直接执行操作？
A：涉及变更或高风险动作时，需要审批确认后才执行。

### Q2：为什么主机诊断提示认证失败？
A：通常是 SSH 密钥/密码不匹配，或账号权限不足。

### Q3：如何避免误操作生产环境？
A：使用预览、二次确认、审批链路，并保留回滚方案。

### Q4：如何提高排障效率？
A：先按告警级别和影响面排序，再结合 AI 输出分步诊断计划。

## 8. 文档维护建议

- 每次新增功能都补充“操作步骤 + 常见问题”
- 每次线上事故补充“现象-原因-处置”条目
- 每月审查一次过期截图、路径和权限策略
