# 运维值班 FAQ 100 题

## A. 平台与登录（1-10）

1. Q: 登录失败提示账号或密码错误怎么办？
A: 先确认账号是否被禁用，再重置密码并检查输入法全半角。

2. Q: 登录后页面空白怎么处理？
A: 强刷浏览器缓存，检查接口是否返回 401/500。

3. Q: 为什么会频繁掉线？
A: 可能是 token 过期或网关会话超时，检查认证配置。

4. Q: 如何切换项目上下文？
A: 使用顶部项目切换器，确认当前资源范围后再操作。

5. Q: 如何确认当前环境是生产还是测试？
A: 查看页面环境标签、发布目标和命名空间标识。

6. Q: 页面报权限不足如何处理？
A: 联系管理员给对应角色授予最小必要权限。

7. Q: 接口 403 和 401 有什么区别？
A: 401 是未认证，403 是已认证但无权限。

8. Q: 多人共用账号有什么风险？
A: 审计不可追溯，建议禁用共享账号。

9. Q: 如何查看平台版本信息？
A: 在设置/关于或发布说明文档查看版本号。

10. Q: 登录慢怎么排查？
A: 查认证服务耗时、数据库连接池和网关限流策略。

## B. 监控与告警（11-25）

11. Q: 告警太多先处理哪类？
A: 先处理 critical 且影响核心链路的告警。

12. Q: 如何快速判断误报？
A: 对比多指标与时间窗，确认是否单点抖动。

13. Q: 告警触发后第一步做什么？
A: 确认影响范围（服务、用户、区域、时间）。

14. Q: 告警抖动如何治理？
A: 增加持续时间阈值和去抖策略。

15. Q: 夜间值班如何降噪？
A: 按业务重要性分级路由通知通道。

16. Q: CPU 告警但业务正常怎么办？
A: 结合负载、QPS、延迟和错误率综合判断。

17. Q: 内存持续上涨如何处置？
A: 排查泄漏、缓存策略、对象生命周期和版本变更。

18. Q: 磁盘满告警优先检查什么？
A: 日志增长、临时目录、备份文件和挂载点使用率。

19. Q: 告警恢复后还要做什么？
A: 补充复盘记录与后续防复发任务。

20. Q: 怎样设计 SLO 告警？
A: 以用户体验指标为中心，设置错误预算。

21. Q: 告警渠道超时怎么办？
A: 增加备用渠道并做发送失败重试。

22. Q: 告警收敛规则怎么配？
A: 按服务、集群、环境、根因标签聚合。

23. Q: 如何区分主因告警和派生告警？
A: 优先看上游依赖与链路拓扑根节点。

24. Q: 指标缺失导致误判怎么办？
A: 补齐采集链路并监控采集可用性。

25. Q: 什么时候升级事故等级？
A: 当影响面扩大且恢复时间不可控时立刻升级。

## C. 主机与系统（26-40）

26. Q: 主机离线第一步？
A: 先确认网络和电源状态，再检查 agent 心跳。

27. Q: SSH 认证失败怎么办？
A: 验证账号、密码/密钥、端口和安全组规则。

28. Q: 如何判断主机高负载原因？
A: 查看 top 进程、loadavg、IO wait 与上下文切换。

29. Q: 系统盘满了怎么紧急处理？
A: 清理临时与旧日志，转移大文件并扩容。

30. Q: 内核参数异常如何回滚？
A: 先备份配置，再按变更单恢复默认值。

31. Q: 端口被占用怎么查？
A: 使用 ss/lsof 定位进程并评估是否可重启。

32. Q: journal 日志过大怎么办？
A: 调整保留策略并压缩归档。

33. Q: 主机时间漂移会造成什么问题？
A: 证书、调度、日志排序与鉴权都会异常。

34. Q: 如何做主机健康基线？
A: 定义 CPU/内存/磁盘/连接数阈值与趋势线。

35. Q: 批量执行命令如何防误操作？
A: 先预览目标清单，再灰度执行。

36. Q: 只读诊断和变更命令如何区分？
A: 读命令无状态修改，变更命令会改系统状态。

37. Q: 主机探测间歇失败怎么办？
A: 重点排查网络抖动和连接池耗尽。

38. Q: 发现僵尸进程怎么处理？
A: 定位父进程并修复回收逻辑。

39. Q: 机器频繁 OOM 怎么治理？
A: 限制峰值、优化内存、分级降载。

40. Q: 如何做主机变更审计？
A: 强制通过平台操作并记录执行人和参数。

## D. Kubernetes（41-55）

41. Q: Pod CrashLoopBackOff 常见原因？
A: 启动参数错误、依赖不可达、探针配置不当。

42. Q: Pod Pending 怎么查？
A: 看调度事件、资源不足、污点与亲和性。

43. Q: 镜像拉取失败怎么处理？
A: 检查镜像地址、凭据、仓库可达性。

44. Q: Deployment 一直不就绪？
A: 检查探针、配置、依赖服务、滚动策略。

45. Q: HPA 不生效怎么排查？
A: 查看 metrics-server 与目标指标是否可用。

46. Q: Service 无流量怎么办？
A: 校验 selector、端口映射和 endpoints。

47. Q: Ingress 404 的常见原因？
A: 路由规则、host/path 不匹配或后端服务异常。

48. Q: Node NotReady 怎么办？
A: 检查 kubelet、网络插件和磁盘压力。

49. Q: PVC 挂载失败如何定位？
A: 看存储类、权限、CSI 插件和事件。

50. Q: 证书过期会带来什么影响？
A: API 调用失败、节点通信异常。

51. Q: 如何做安全发布？
A: 小流量灰度+指标门禁+自动回滚。

52. Q: kube-system 告警需要优先吗？
A: 是，控制平面问题会放大业务风险。

53. Q: 多集群故障如何分层处理？
A: 先区分控制平面、网络层、业务层。

54. Q: 如何降低发布抖动？
A: 控制并发滚动和 readiness 检查窗口。

55. Q: 如何保留关键事件证据？
A: 及时导出 events、pod 日志和变更记录。

## E. 服务发布与回滚（56-70）

56. Q: 发布前必须检查什么？
A: 变更范围、依赖、回滚方案、监控门禁。

57. Q: 为什么先做预览？
A: 预览可提前发现配置冲突和风险。

58. Q: 生产发布为何要二次确认？
A: 防止误触发高风险变更。

59. Q: 发布后观察哪些指标？
A: 错误率、延迟、吞吐、资源使用与告警。

60. Q: 回滚触发条件怎么定？
A: 指标超阈值且持续时间超过容忍窗口。

61. Q: 灰度发布比例怎么设？
A: 从小流量开始，逐步放量并验证。

62. Q: 如何避免配置和镜像版本不一致？
A: 使用发布单绑定版本与配置快照。

63. Q: 发布失败后如何复盘？
A: 记录时间线、根因、修复动作和预防项。

64. Q: 发布窗口如何选择？
A: 避开业务峰值，预留充足回退时间。

65. Q: 多服务联动发布如何控风险？
A: 分批次、可回退、依赖顺序执行。

66. Q: 为什么要保留发布审计？
A: 满足追踪责任和合规要求。

67. Q: 回滚也失败怎么办？
A: 启动降级预案并升级事故响应。

68. Q: 如何减少人为发布失误？
A: 模板化参数、强校验、审批链路。

69. Q: 线上紧急修复如何做？
A: 最小变更原则，先恢复再优化。

70. Q: 什么时候需要冻结发布？
A: 重大事故期间或核心依赖不稳定时。

## F. 配置中心（71-80）

71. Q: 配置发布前要做什么？
A: 先 Diff 审核并检查影响服务列表。

72. Q: 敏感配置如何管理？
A: 使用密文存储并限制可见范围。

73. Q: 配置生效慢怎么排查？
A: 检查推送链路、缓存刷新和客户端拉取。

74. Q: 如何避免错误配置扩散？
A: 分环境发布，先灰度后全量。

75. Q: 配置回滚后仍异常怎么办？
A: 检查是否有并发发布覆盖。

76. Q: 配置项命名建议？
A: 统一前缀、语义明确、避免歧义。

77. Q: 如何做配置审计？
A: 记录操作者、变更 diff、发布时间与环境。

78. Q: 大规模配置变更如何执行？
A: 分批次并附自动化验证脚本。

79. Q: 配置与代码版本如何关联？
A: 在发布单中绑定 commit 和配置版本。

80. Q: 如何设置配置告警？
A: 关注发布失败率和异常回滚频率。

## G. 任务调度与自动化（81-90）

81. Q: Cron 任务重复执行怎么办？
A: 检查并发策略与幂等锁。

82. Q: 任务超时怎么处理？
A: 增加超时控制并优化慢步骤。

83. Q: 批处理失败重试策略？
A: 指数退避+最大重试次数+死信记录。

84. Q: 如何避免批量任务误伤？
A: 先预览目标并设置白名单。

85. Q: 任务输出太大怎么办？
A: 分片存储并限制日志长度。

86. Q: 如何追踪任务执行链路？
A: 统一任务 ID 贯穿日志与审计。

87. Q: 周期任务漂移怎么解决？
A: 固定时区并校正调度器时钟。

88. Q: 自动化脚本如何版本化？
A: 脚本仓库化并走变更评审。

89. Q: 为什么要做任务回放？
A: 快速复现失败场景并验证修复。

90. Q: 任务安全边界怎么定义？
A: 限制危险命令并强制审批。

## H. 权限、安全与 AI（91-100）

91. Q: 最小权限原则怎么落地？
A: 默认只读，按场景临时授权。

92. Q: 高权限账号如何治理？
A: 建立审批、双人复核和定期回收。

93. Q: 如何防止误删资源？
A: 危险操作二次确认+延迟执行窗口。

94. Q: 审批超时后怎么办？
A: 重新发起审批并核对参数。

95. Q: AI 可直接执行所有命令吗？
A: 不可以，变更类动作必须审批。

96. Q: AI 回答不准确怎么处理？
A: 补充上下文并要求基于实时数据再判断。

97. Q: 如何给 AI 更高质量提问？
A: 提供对象、现象、时间范围和期望输出。

98. Q: AI 建议与人工判断冲突怎么办？
A: 以生产安全为先，先做只读验证。

99. Q: 如何把 FAQ 喂给 AI？
A: 建议分块建索引，按关键词检索后注入提示词。

100. Q: 值班交接必须包含什么？
A: 当前告警、未完成变更、风险项和下一步计划。
